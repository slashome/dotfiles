// Precompiled on 2018-10-04 00:21:40 -0500
!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):e.ouibounce=n()}(this,function(){return function(e,n){"use strict";function o(e,n){return"undefined"==typeof e?n:e}function i(e){var n=24*e*60*60*1e3,o=new Date;return o.setTime(o.getTime()+n),"; expires="+o.toUTCString()}function t(){s()||(L.addEventListener("mouseleave",u),L.addEventListener("mouseenter",r),L.addEventListener("keydown",c))}function u(e){e.clientY>k||(D=setTimeout(m,y))}function r(){D&&(clearTimeout(D),D=null)}function c(e){g||e.metaKey&&76===e.keyCode&&(g=!0,D=setTimeout(m,y))}function d(e,n){return a()[e]===n}function a(){for(var e=document.cookie.split("; "),n={},o=e.length-1;o>=0;o--){var i=e[o].split("=");n[i[0]]=i[1]}return n}function s(){return d(T,"true")&&!v}function m(){s()||(e&&(e.style.display="block"),E(),f())}function f(e){var n=e||{};"undefined"!=typeof n.cookieExpire&&(b=i(n.cookieExpire)),n.sitewide===!0&&(w=";path=/"),"undefined"!=typeof n.cookieDomain&&(x=";domain="+n.cookieDomain),"undefined"!=typeof n.cookieName&&(T=n.cookieName),document.cookie=T+"=true"+b+x+w,L.removeEventListener("mouseleave",u),L.removeEventListener("mouseenter",r),L.removeEventListener("keydown",c)}var l=n||{},v=l.aggressive||!1,k=o(l.sensitivity,20),p=o(l.timer,1e3),y=o(l.delay,0),E=l.callback||function(){},b=i(l.cookieExpire)||"",x=l.cookieDomain?";domain="+l.cookieDomain:"",T=l.cookieName?l.cookieName:"viewedOuibounceModal",w=l.sitewide===!0?";path=/":"",D=null,L=document.documentElement;setTimeout(t,p);var g=!1;return{fire:m,disable:f,isDisabled:s}}}),function(){var extend;extend=function(obj,mixin){var method,name;for(name in mixin)method=mixin[name],obj[name]=method;return obj},window.PulseInsightsInclude=function(klass,mixin){return extend(klass.prototype,mixin)}}.call(this),function(){window.PulseInsights=function(){function PulseInsights(){this.debugMode=!1,this.previewMode=this.isPreviewMode(),this.previewMode&&this.log("Live preview mode enabled, answers won't be posted and triggering rules ignored."),this.installHookOnCommandsArray(),this.processPendingCommands(),this.incrementPageviews(),this.incrementVisits()}return PulseInsights.prototype.log=function(message){if(null==this.logMessages&&(this.logMessages=[]),this.logMessages.push(message),this.debugMode===!0)return console.log("Pulse Insights: "+message)},PulseInsights.prototype.printLog=function(){var i,len,message,ref;for(ref=this.logMessages,i=0,len=ref.length;i<len;i++)message=ref[i],console.log("Pulse Insights: "+message);return!0},PulseInsights.prototype.debug=function(enable){if(this.debugMode=enable,this.debugMode===!0)return this.log("Debug mode enabled.")},PulseInsights.prototype.isPreviewMode=function(){var livePreviewIsEnabled;return livePreviewIsEnabled=this.getQueryStringValue("pi_live_preview"),"false"===livePreviewIsEnabled||"0"===livePreviewIsEnabled||"f"===livePreviewIsEnabled||"disabled"===livePreviewIsEnabled?(this.eraseCookie("pi_live_preview"),!1):"true"===livePreviewIsEnabled||"1"===livePreviewIsEnabled||"t"===livePreviewIsEnabled||"enabled"===livePreviewIsEnabled?(this.createCookie("pi_live_preview","true"),!0):"true"===this.readCookie("pi_live_preview")},PulseInsights.prototype.getQueryStringValue=function(name){var i,key,len,pair,pairs,queryString,ref,ref1,value,variables;for(queryString=null!=(ref=window.document.location.search)?ref.substr(1):void 0,variables=queryString.split("&"),pairs=function(){var i,len,ref1,results;for(results=[],i=0,len=variables.length;i<len;i++)pair=variables[i],results.push((ref1=pair.split("="),key=ref1[0],value=ref1[1],ref1));return results}(),i=0,len=pairs.length;i<len;i++)if(ref1=pairs[i],key=ref1[0],value=ref1[1],key===name)return value},PulseInsights.prototype.preview=function(enable){if(this.previewMode=enable,this.previewMode===!0)return this.log("Preview mode enabled, answers won't be posted")},PulseInsights.prototype.poll_results_for_preview=function(poll_results){if(this.previewMode===!0)return this.poll_results_for_preview=poll_results},PulseInsights.prototype.identify=function(identifier){return this.log("Identifier is now set to '"+identifier+"'."),this.identifier=identifier},PulseInsights.prototype.identify_client=function(client_key){return this.log("Client key is now set to '"+client_key+"'."),this.updateClientKey(client_key),this.client_key=client_key},PulseInsights.prototype.incrementPageviews=function(){var pi_pageview_count;return pi_pageview_count=this.readCookie("pi_pageview_count"),pi_pageview_count?this.createCookie("pi_pageview_count",parseInt(pi_pageview_count,10)+1):this.createCookie("pi_pageview_count",1)},PulseInsights.prototype.incrementVisits=function(){var pi_visit_count;if("true"!==this.readCookie("pi_visit_track"))return this.createCookie("pi_visit_track","true"),pi_visit_count=this.readCookie("pi_visit_count"),pi_visit_count?this.createCookie("pi_visit_count",parseInt(pi_visit_count,10)+1,3650):this.createCookie("pi_visit_count",1,3650)},PulseInsights}()}.call(this),function(){window.Survey=function(){function Survey(_attributes){this.attributes=_attributes,this.started=!1,this.attributes.questions&&(this.questions=this.attributes.questions)}return Survey.prototype.id=function(){return this.attributes.id},Survey.prototype.widgetParent=function(){return document.getElementsByTagName("body")[0]},Survey.prototype.widgetPositioning=function(){return""},Survey.prototype.fontCSS=function(){return" font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: normal;"},Survey.prototype.cssStyle=function(){return"#_pi_surveyWidgetContainer { z-index: 1031; } #_pi_surveyWidgetCustom { "+this.fontCSS()+" position: fixed; top: 0; left: 0; padding: 0; margin: 0; width: 100%; height: 100%; z-index: 1032; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s; -webkit-transition: 0.2s; transition: 0.2s; font-size: 16px; z-index: 18000; overflow: hidden; } #_pi_surveyWidget { "+this.fontCSS()+" position: fixed; max-height: 0px; height: auto; width:"+this.width()+"; "+this.widgetPositioning()+"; background-color: "+this.backgroundColor()+"; text-align: center; z-index: 1032; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s; -webkit-transition: 0.2s; transition: 0.2s; font-size: 16px; z-index: 18000; overflow: hidden; } ._pi_closeCustomButton { "+this.fontCSS()+" position: absolute; top: 6px; right: 10px; color: #000; cursor: pointer; } ._pi_closeButton { "+this.fontCSS()+" position: absolute; top: 6px; right: 10px; color: #fff; cursor: pointer; } ._pi_invitationTextContainer { "+this.fontCSS()+" color: "+this.textColor()+"; cursor: pointer; } ._pi_background_image { max-width: 100%; } ._pi_startButton { "+this.fontCSS()+" padding: 8px 12px; background-color: black; color: white; } ._pi_startButton:hover { text-decoration: none; } ._pi_loadingSurvey, ._pi_thankYouSurvey { "+this.fontCSS()+" color: "+this.textColor()+"; } ._pi_pollContainer { "+this.fontCSS()+" color: "+this.textColor()+"; padding: 30px 0px 30px 0px; text-align: left; } ._pi_pollChoice { margin-top: 2px; margin-bottom: 2px; margin-left: 7px; overflow: hidden; position: relative; display: block; cursor: inherit; text-overflow: ellipsis; white-space: nowrap; } ._pi_pollChart { background-color: rgba(255,255,255,0.15); position: absolute; top: 0; left: 0; width: 0; height: 100%; transition: all .3s cubic-bezier(0.5,1.2,.5,1.2); opacity: 1; } ._pi_pollProgress { display: inline-block; max-width: 100%; margin-bottom: 30px; margin-left: 7px; font-size: 12px; overflow: hidden; } ._pi_pollProgressPercentage { display: inline-block; } ._pi_pollProgressCount { display: inline-block; margin-left: 5px; } ._pi_pollText { position: relative; display: inline-block; } ._pi_pollText span { vertical-align: middle; } ._pi_pollName { font-size: 14px; margin-left: 7px; } ._pi_question { "+this.fontCSS()+" color: "+this.textColor()+"; text-align: left; padding: 0px 20px; margin-top: 20px; } ._pi_question_custom_content_question_fullscreen { color: black; } ._pi_answers_container { margin-top: 10px; } ul._pi_answers_container, div._pi_answers_container { list-style-type: none; padding: 0px 0px 20px 0px; margin: 10px 0px; width: 100%; overflow: hidden; } ul._pi_answers_container li { background-color: rgba(255, 255, 255, 0.05); text-align: left; margin: 15px 0px; padding: 0px 20px; width: 100%; overflow: hidden; max-width: 460px; float: left; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } ul._pi_answers_container li:hover { background-color: rgba(255, 255, 255, 0.1); } ul._pi_answers_container li a { position: relative; display: block; color: "+this.answerTextColor()+"; "+this.fontCSS()+" margin: 0px; padding: 0px 20px 0px 0px; text-decoration: none; } ul._pi_answers_container li a img { margin: 5px 0; } ul._pi_answers_container li a label.with-image { float: none!important; margin-left: 5px; width: auto; } ul._pi_answers_container li a label { color: "+this.answerTextColor()+"; "+this.fontCSS()+" width: 100%; width: -moz-calc(100% - 35px); width: -webkit-calc(100% - 35px); width: calc(100% - 35px); float: left; cursor: pointer; margin: 0px 0px 0px 25px; padding: 5px 0px 5px 0px; } ul._pi_answers_container li a span._pi_radio_button_outer { position: absolute; top: 10px; left: 0px; display: inline-block; float: left; border: 1px solid rgba(255,255,255,0.5); border-radius: 50%; width: 14px; height: 14px; } ul._pi_answers_container li a span._pi_radio_button_inner, ul._pi_answers_container li a span._pi_checkbox_inner { position: absolute; top: 2px; left: 2px; width: 8px; height: 8px; } ul._pi_answers_container li:hover a span._pi_radio_button_inner, ul._pi_answers_container li.selected a span._pi_radio_button_inner { background-color: rgba(255,255,255,0.5); border: 1px solid transparent; border-radius: 50%; } a._pi_branding { "+this.fontCSS()+" color: white; font-size: 10px; position: absolute; bottom: 8px; left: 8px; } a._pi_branding:hover { "+this.fontCSS()+" color: white; font-size: 10px; text-decoration: none; } div._pi_all_questions_submit_button_container { margin-bottom: 25px; clear: both; } input._pi_all_questions_submit_button { background-color: black; font-size: 15px; padding: 5px 20px; border: none; color: #eaf4fb; cursor: pointer; } input._pi_all_questions_submit_button:hover { background-color: #101010; } input._pi_all_questions_submit_button:disabled { opacity: 0.3; } input._pi_all_questions_submit_button:hover:disabled { background-color: black; opacity: 0.3; } ._pi_all_questions_error { "+this.fontCSS()+"; text-align: center; font-size: 12px; color: #927a85; margin-top: 10px; } "+this.freeTextQuestionCSS()+" "+this.multipleChoicesQuestionCSS()},Survey.prototype.borderColor=function(){return"rgba(174, 174, 174, 0.6);"},Survey.prototype.mobileCssStyle=function(){return"#_pi_surveyWidgetContainer.mobile-enabled { position: fixed; top: 0; left: 0; right: 0; bottom: 0; text-align: center; background-color: rgba(0, 0, 0, 0.5); } #_pi_surveyWidgetContainer.mobile-enabled #_pi_surveyWidget { width: 90%; position: relative; top: auto; left: auto; right: auto; bottom: auto; margin-top: 10%; margin-left: auto; margin-right: auto; border: 3px solid "+this.borderColor()+"; border-radius: 5px; } #_pi_surveyWidgetContainer.mobile-enabled ._pi_closeButton { background-color: rgba(255, 255, 255, 0.1); width: 40px; height: 40px; font-size: 20px; line-height: 40px; } #_pi_surveyWidgetContainer.mobile-enabled ._pi_widgetContentContainer { margin-top: 10px; } "+this.freeTextQuestionCSS()+" "+this.multipleChoicesQuestionCSS()},Survey.prototype.position=function(){var _position;return _position={top:""===this.attributes.top_position?null:this.attributes.top_position,bottom:""===this.attributes.bottom_position?null:this.attributes.bottom_position,left:""===this.attributes.left_position?null:this.attributes.left_position,right:""===this.attributes.right_position?null:this.attributes.right_position}},Survey.prototype.width=function(){return 0===this.attributes.width?"300px":this.attributes.width+"px"},Survey.prototype.height=function(){return"auto"},Survey.prototype.backgroundColor=function(){return this.attributes.background_color||"#181818"},Survey.prototype.textColor=function(){return this.attributes.text_color||"white"},Survey.prototype.answerTextColor=function(){return this.attributes.answer_text_color||"white"},Survey.prototype.invitationText=function(){return this.attributes.invitation||""},Survey.prototype.invitationButtonText=function(){return this.attributes.invitation_button||""},Survey.prototype.invitationButtonDisabled=function(){return this.attributes.invitation_button_disabled||"f"},Survey.prototype.thankYouText=function(){return this.attributes.thank_you||"Thank you!"},Survey.prototype.formatText=function(text){var div;return div=document.createElement("div"),div.appendChild(document.createTextNode(text)),text=div.innerHTML,text=text.replace(/_([^_]+)_/g,"<em>$1</em>"),text=text.replace(/\*([^\*]+)\*/g,"<b>$1</b>")},Survey.prototype.log=function(message){return window.PulseInsightsObject.log(message)},Survey.prototype.loadQuestions=function(){return null!=this.questions?this.questionsLoaded(this.questions):window.PulseInsightsObject.jsonpGet("/surveys/"+this.id()+"/questions",{identifier:window.PulseInsightsObject.identifier},this.questionsLoaded)},Survey.prototype.questionsLoaded=function(data){var fn,i,len,q,ref,survey;for(survey=window.PulseInsightsObject.survey,survey.questions=data,survey.question=survey.questions[0],ref=survey.questions,fn=function(q){if(q.position<survey.question.position)return survey.question=q},i=0,len=ref.length;i<len;i++)q=ref[i],fn(q);return"t"===survey.attributes.display_all_questions?survey.renderAllQuestions():survey.renderCurrentQuestion()},Survey.prototype.getAnswerElement=function(target){var parent;if("A"===target.tagName)return target;for(parent=target;parent&&"A"!==parent.tagName;)parent=parent.parentNode;return parent},Survey.prototype.customCardClicked=function(){var params,questionId,submissionUdid;return window.PulseInsightsObject.survey.next_question=this.getAttribute("data-question-id"),submissionUdid=null!=window.PulseInsightsObject.submission?window.PulseInsightsObject.submission.udid:null,questionId=window.PulseInsightsObject.survey.question.id,params={identifier:window.PulseInsightsObject.identifier,question_id:questionId,next_question_id:this.getAttribute("data-question-id")},null!=window.PulseInsightsObject.customData&&(params.custom_data=window.PulseInsightsObject.stringify(window.PulseInsightsObject.customData)),window.PulseInsightsObject.client_key&&(params.client_key=window.PulseInsightsObject.getClientKey()),window.PulseInsightsObject.previewMode?(window.PulseInsightsObject.survey.customAnswersSubmitted(),!1):(window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/answer",params,window.PulseInsightsObject.survey.customAnswersSubmitted),!1)},Survey.prototype.allQuestionsSubmitClicked=function(event){var answer_container,answers,i,j,len,len1,params,ref,ref1,submissionUdid;for(event.stopPropagation(),ref=document.querySelectorAll("._pi_answers_container"),i=0,len=ref.length;i<len;i++)if(answer_container=ref[i],null===answer_container.getAttribute("data-answer")&&"f"===answer_container.getAttribute("data-question-optional"))return void(document.querySelectorAll("._pi_all_questions_error")[0].innerHTML="Please fill all answers");for(document.querySelectorAll("._pi_all_questions_error")[0].innerHTML="",answers=[],ref1=document.querySelectorAll("._pi_answers_container"),j=0,len1=ref1.length;j<len1;j++)answer_container=ref1[j],null===answer_container.getAttribute("data-answer")&&"t"===answer_container.getAttribute("data-question-optional")||answers.push({question_id:answer_container.getAttribute("data-question-id"),question_type:answer_container.getAttribute("data-question-type"),answer:answer_container.getAttribute("data-answer")});return params={identifier:window.PulseInsightsObject.identifier,answers:JSON.stringify(answers)},null!=window.PulseInsightsObject.customData&&(params.custom_data=window.PulseInsightsObject.stringify(window.PulseInsightsObject.customData)),window.PulseInsightsObject.client_key&&(params.client_key=window.PulseInsightsObject.getClientKey()),submissionUdid=null!=window.PulseInsightsObject.submission?window.PulseInsightsObject.submission.udid:null,window.PulseInsightsObject.previewMode?params.preview_mode=!0:window.PulseInsightsObject.triggerOnAnswerCallback(),window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/all_answers",params,window.PulseInsightsObject.survey.allAnswersSubmitted),!1},Survey.prototype.answerClicked=function(event){var answer,answerId,params,questionId,submissionUdid;return event.stopPropagation(),"_pi_select"===event.target.getAttribute("class")?answerId=event.target.value:(answer=window.PulseInsightsObject.survey.getAnswerElement(event.target),answerId=answer.getAttribute("data-answer-id")),window.PulseInsightsObject.survey.answerId=answerId,submissionUdid=null!=window.PulseInsightsObject.submission?window.PulseInsightsObject.submission.udid:null,questionId=window.PulseInsightsObject.survey.question.id,params={identifier:window.PulseInsightsObject.identifier,question_id:questionId,answer_id:answerId,submission:JSON.stringify(window.PulseInsightsObject.submission),device_udid:window.PulseInsightsObject.udid},null!=window.PulseInsightsObject.customData&&(params.custom_data=window.PulseInsightsObject.stringify(window.PulseInsightsObject.customData)),window.PulseInsightsObject.client_key&&(params.client_key=window.PulseInsightsObject.getClientKey()),window.PulseInsightsObject.previewMode?params.preview_mode=!0:window.PulseInsightsObject.triggerOnAnswerCallback(),window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/answer",params,window.PulseInsightsObject.survey.answersSubmitted),!1},Survey.prototype.customAnswersSubmitted=function(){return window.PulseInsightsObject.survey.goToNextQuestion()},Survey.prototype.answersSubmitted=function(data){return window.PulseInsightsObject.survey.goToNextQuestionOrThankYou(data)},Survey.prototype.allAnswersSubmitted=function(data){return window.PulseInsightsObject.survey.thankYouOrResults(data)},Survey.prototype.thankYouOrResults=function(){return this.renderThankYou()},Survey.prototype.goToNextQuestion=function(){var nextQuestion,nextQuestionId,q;nextQuestionId=window.PulseInsightsObject.survey.next_question,nextQuestion=function(){var i,len,ref,results;for(ref=this.questions,results=[],i=0,len=ref.length;i<len;i++)q=ref[i],q.id===parseInt(nextQuestionId)&&results.push(q);return results}.call(this)[0],this.question=nextQuestion,this.renderCurrentQuestion()},Survey.prototype.goToNextQuestionOrThankYou=function(data){var answer,nextQuestion,pa,possibleAnswer,q;return"single_choice_question"===this.question.question_type&&(possibleAnswer=function(){var i,len,ref,results;for(ref=this.question.possible_answers,results=[],i=0,len=ref.length;i<len;i++)pa=ref[i],pa.id===parseInt(this.answerId)&&results.push(pa);return results}.call(this)[0],null==this.answers&&(this.answers=[]),this.answers.push(possibleAnswer),null!=possibleAnswer.next_question_id&&(nextQuestion=function(){var i,len,ref,results;for(ref=this.questions,results=[],i=0,len=ref.length;i<len;i++)q=ref[i],q.id===possibleAnswer.next_question_id&&results.push(q);return results}.call(this)[0],null!=nextQuestion))?(this.question=nextQuestion,void this.renderCurrentQuestion()):"free_text_question"!==this.question.question_type&&"multiple_choices_question"!==this.question.question_type||(answer={},"free_text_question"===this.question.question_type?null!=window.PulseInsightsObject.survey.textInput&&(answer.content=window.PulseInsightsObject.survey.textInput.value):answer.content=PulseInsightsObject.survey.checkBoxes,null!=this.question.next_question_id&&0!==this.question.next_question_id&&(answer.next_question_id=this.question.next_question_id),null==this.answers&&(this.answers=[]),answer.content&&this.answers.push(answer),null==this.question.next_question_id||(nextQuestion=function(){var i,len,ref,results;for(ref=this.questions,results=[],i=0,len=ref.length;i<len;i++)q=ref[i],q.id===this.question.next_question_id&&results.push(q);return results}.call(this)[0],null==nextQuestion))?(window.PulseInsightsObject.triggerOnCompleteCallback(),null!=data&&Object.keys(data).length>0&&data.constructor===Array?this.renderResults(data):this.renderThankYou()):(this.question=nextQuestion,void this.renderCurrentQuestion())},Survey.prototype.startButtonClickedEvent=function(e){var survey;return e.stopPropagation(),null==this.started&&(this.started=!0,survey=window.PulseInsightsObject.survey,survey.startButtonClicked.apply(survey,[]),!1)},Survey.prototype.startButtonClicked=function(){return this.widgetContent.innerHTML="<div class='_pi_loadingSurvey'>Loading...</div>",this.loadQuestions()},Survey.prototype.widgetContainerClickedEvent=function(e){return e.stopPropagation()},Survey.prototype.closeButtonClickedEvent=function(e){var submissionUdid,survey;return void 0!==e&&e.stopPropagation(),window.PulseInsightsObject.submission&&(submissionUdid=window.PulseInsightsObject.submission.udid,window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/close",{},window.PulseInsightsObject.survey.surveyClosed)),survey=window.PulseInsightsObject.survey,survey.closeButtonClicked.apply(survey,[]),!1},Survey.prototype.surveyClosed=function(){return this.log("Survey closed")},Survey.prototype.closeButtonClicked=function(){var container;return window.PulseInsightsObject.triggerOnCompleteCallback(),this.widget.setAttribute("style","max-height: 0px"),container=this.widgetContainer,setTimeout(function(){return container.setAttribute("style","display: none;")},200),!1},Survey.prototype.destroy=function(){var body,css,i,len,ref,results;for(this.closeButtonClicked(),this.widgetParent().removeChild(this.widgetContainer),body=document.getElementsByTagName("body")[0],ref=document.querySelectorAll("style.survey-"+this.id()),results=[],i=0,len=ref.length;i<len;i++)css=ref[i],results.push(body.removeChild(css));return results},Survey}()}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.BarSurvey=function(superClass){function BarSurvey(){return BarSurvey.__super__.constructor.apply(this,arguments)}return extend(BarSurvey,superClass),BarSurvey.prototype.height=function(){return"auto"},BarSurvey.prototype.width=function(){return"100%"},BarSurvey.prototype.cssStyle=function(){return BarSurvey.__super__.cssStyle.apply(this,arguments)+("._pi_invitationTextContainer { margin: 10px 20px; display: inline-block; } ._pi_startButton { display: inline-block; margin-top: 5px; } ._pi_loadingSurvey, ._pi_thankYouSurvey { "+this.fontCSS()+" color: "+this.textColor()+"; margin: 50px 0px 80px 0px; text-align: center; } ._pi_surveyWidget { text-align: center; height: auto; } ._pi_widgetContentContainer { margin-left: auto; margin-right: auto; width: 960px; text-align: center; } ._pi_closeButton { padding: 8px; } @media screen and (max-width: 960px) { ._pi_widgetContentContainer { width: 100%; } }")},BarSurvey}(window.Survey)}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.BottomBarSurvey=function(superClass){function BottomBarSurvey(){return BottomBarSurvey.__super__.constructor.apply(this,arguments)}return extend(BottomBarSurvey,superClass),BottomBarSurvey.prototype.widgetPositioning=function(){return"bottom: 0px; left: 0px; right: 0px;"},BottomBarSurvey}(window.BarSurvey)}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{oncomplete:function(callbackFunction){return this.log("Oncomplete Callback function enabled."),this.OncompleteCallbackFunction=callbackFunction},onanswer:function(callbackFunction){return this.log("Onanswer Callback function enabled."),this.OnanswerCallbackFunction=callbackFunction},triggerOnCompleteCallback:function(){var error,survey;if(this.log("Try to trigger on complete callbacks."),null!=this.OncompleteCallbackFunction&&null!=this.survey.answers&&this.survey.answers.length>0&&(this.log("Triggering custom on complete callback"),this.OncompleteCallbackFunction.apply(this,[this.survey]),this.OncompleteCallbackFunction=null),null==this.survey.attributes.oncomplete_callback_code||0===this.survey.attributes.oncomplete_callback_code.length||null!=this.survey.oncomplete_callback_executed)return void this.log("No oncomplete callbacks defined in console");if(null==this.survey.answers||0===this.survey.answers.length)return void this.log("No oncomplete callbacks fired when closing the survey without answer");this.log("Triggering on complete callback set in console");try{survey=this.survey,eval(this.survey.attributes.oncomplete_callback_code)}catch(error1){error=error1,this.log("Error while executing on complete callback: "+error)}return this.survey.oncomplete_callback_executed=!0},triggerOnAnswerCallback:function(){var answer,error,i,j,k,len,len1,len2,possible_answer,question,ref,ref1,ref2,response,survey;if(this.log("Try to trigger on answer callbacks."),null!=this.OnanswerCallbackFunction&&null!=this.survey.answers&&this.survey.answers.length>0&&(this.log("Triggering custom on answer callback"),this.OnanswerCallbackFunction.apply(this,[this.survey]),this.OnanswerCallbackFunction=null),null==this.survey.attributes.onanswer_callback_code||0===this.survey.attributes.onanswer_callback_code.length)return void this.log("No answer callbacks defined in console");this.log("Triggering on answer callback set in console");try{if(survey=this.survey,question=this.survey.question,"free_text_question"===this.survey.question.question_type&&(answer={id:null,content:this.survey.textInput.value,next_question_id:this.survey.question.next_question_id}),"multiple_choices_question"===this.survey.question.question_type)for(answer={id:[],content:[],next_question_id:[]},ref=this.survey.question.possible_answers,i=0,len=ref.length;i<len;i++)for(possible_answer=ref[i],ref1=this.survey.checkBoxes,j=0,len1=ref1.length;j<len1;j++)response=ref1[j],possible_answer.id===parseInt(response)&&(answer.content.push(possible_answer.content),answer.id.push(possible_answer.id),answer.next_question_id.push(possible_answer.next_question_id));if("single_choice_question"===this.survey.question.question_type)for(ref2=this.survey.question.possible_answers,k=0,len2=ref2.length;k<len2;k++)possible_answer=ref2[k],possible_answer.id===parseInt(this.survey.answerId)&&(answer=possible_answer);return eval(this.survey.attributes.onanswer_callback_code)}catch(error1){return error=error1,this.log("Error while executing on answer callback: "+error)}}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{ClientKeyCookieName:function(){return"pulse_insights_client_key"},ClientKeyCookieExpiration:function(){return 60},getClientKey:function(){var existingClientKey;return existingClientKey=this.readCookie(this.ClientKeyCookieName()),null!=existingClientKey?(this.log("Found existing Client Key: "+existingClientKey),existingClientKey):(this.log("Could not find existing Client Key"),null)},updateClientKey:function(newClientKey){return this.createCookie(this.ClientKeyCookieName(),newClientKey,this.ClientKeyCookieExpiration())}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{installHookOnCommandsArray:function(){if(this.log("Installing hook on commands array"),window.pi&&window.pi.commands&&(window.pi.commands.push=function(){var args,i,len,results;for(results=[],i=0,len=arguments.length;i<len;i++)args=arguments[i],results.push(window.PulseInsightsObject.processCommand(args));return results}),window.pulseinsights&&window.pulseinsights.commands)return window.pulseinsights.commands.push=function(){var args,i,len,results;for(results=[],i=0,len=arguments.length;i<len;i++)args=arguments[i],results.push(window.PulseInsightsObject.processCommand(args));return results}},processPendingCommands:function(){var command,results;if(window.pi&&window.pi.commands)for(this.log("Processing "+window.pi.commands.length+" commands that are pending");command=window.pi.commands.shift();)this.processCommand(command);if(window.pulseinsights&&window.pulseinsights.commands){for(this.log("Processing "+window.pulseinsights.commands.length+" commands that are pending"),results=[];command=window.pulseinsights.commands.shift();)results.push(this.processCommand(command));return results}},processCommand:function(args){var argumentsArray,error,theFunction;argumentsArray=[].slice.call(args),theFunction=eval("this."+argumentsArray[0]);try{return theFunction.apply(this,argumentsArray.slice(-1))}catch(error1){return error=error1,this.log("Error while executing command: "+error)}}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{createCookie:function(name,value,days){var cookie,date,expires;return days?(date=new Date,date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()):expires="",cookie=name+"="+value+expires+"; path=/",this.log("Creating cookie "+cookie),document.cookie=cookie},readCookie:function(name){var c,findCookie,i,len,nameEQ,pi,ref,value;for(nameEQ=name+"=",pi=this,value=null,findCookie=function(c){for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return value=c.substring(nameEQ.length,c.length)},ref=document.cookie.split(";"),i=0,len=ref.length;i<len;i++)c=ref[i],findCookie(c);return this.log("Read cookie "+name+": "+value),value},eraseCookie:function(name){return this.createCookie(name,"",-1)}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{set_custom_data:function(object){if("object"!=typeof object&&(object={data:object}),this.checkCustomDataSizeLimit(object))return this.log("Received custom data object."),this.customData=object;throw"Custom data too large - 1000 characters maximum."},checkCustomDataSizeLimit:function(data){var fn,key,params,src,value;params=[],fn=function(key){return params.push(key+"="+encodeURIComponent(value))};for(key in data)value=data[key],fn(key);return src=params.join("&"),src.length<1e3}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{set_device_data:function(object){var attrname;if("object"!=typeof object&&(object={data:object}),this.device_data)for(attrname in object)this.device_data[attrname]=object[attrname];else{this.device_data={};for(attrname in object)"identifier"!==attrname&&"callback"!==attrname&&(this.device_data[attrname]=object[attrname])}if(object.identifier=this.identifier,this.checkCustomDataSizeLimit(object))return this.jsonpGet("/devices/"+this.getUDID()+"/set_data",object,this.deviceDataSent),this.log("Received custom data object.");throw"Custom data too large - 1000 characters maximum."},deviceDataSent:function(){return this.log("Device data sent")},checkCustomDataSizeLimit:function(data){var fn,key,params,src,value;params=[],fn=function(key){return params.push(key+"="+encodeURIComponent(value))};for(key in data)value=data[key],fn(key);return src=params.join("&"),src.length<1e3}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{deviceType:function(){return this.isTablet()?"tablet":this.isMobile()?"mobile":"desktop"},userAgent:function(){return navigator.userAgent||navigator.vendor||window.opera},isMobile:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(this.userAgent())||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(this.userAgent().substr(0,4));
},isTablet:function(){return/iPad/.test(this.userAgent())||this.isMobile()&&document.width>1008}})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.DockedWidgetSurvey=function(superClass){function DockedWidgetSurvey(){return DockedWidgetSurvey.__super__.constructor.apply(this,arguments)}return extend(DockedWidgetSurvey,superClass),DockedWidgetSurvey.prototype.widgetPositioning=function(){return null!=this.position().right?"right: "+this.position().right:"left: "+this.position().left},DockedWidgetSurvey.prototype.cssStyle=function(){return DockedWidgetSurvey.__super__.cssStyle.apply(this,arguments)+("#_pi_surveyWidget { border-top: 3px solid "+this.borderColor()+"; border-left: 3px solid "+this.borderColor()+"; border-right: 3px solid "+this.borderColor()+"; border-radius: 5px; bottom: -3px; } ._pi_invitationTextContainer { margin: 30px 0px; } ._pi_startButton { display: block; width: 50%; margin-top: 30px; margin-left: auto; margin-right: auto; margin-bottom: 60px; text-decoration: none; } ._pi_loadingSurvey, ._pi_thankYouSurvey { "+this.fontCSS()+" color: "+this.textColor()+"; margin: 50px 0px 80px 0px; }")},DockedWidgetSurvey}(window.Survey)}.call(this),function(){window.PulseInsightsInclude(window.Survey,{renderFreeTextQuestion:function(possibleAnswersContainer,display_all_question){var submitButtonContainer;return null==display_all_question&&(display_all_question=!1),this.textInputContainer=document.createElement("div"),this.textInputContainer.setAttribute("class","_pi_free_text_question_field_container"),this.maxLength=this.question.max_length,this.question.height<2?(this.textInput=document.createElement("input"),this.textInput.setAttribute("class","_pi_free_text_question_field"),this.textInput.setAttribute("type","text"),this.textInput.setAttribute("placeholder",this.question.hint_text)):(this.textInput=document.createElement("textarea"),this.textInput.setAttribute("class","_pi_free_text_question_field"),this.textInput.setAttribute("rows",this.question.height),this.textInput.setAttribute("cols",20),this.textInput.setAttribute("placeholder",this.question.hint_text)),this.charactersCountLabel=document.createElement("div"),this.charactersCountLabel.setAttribute("class","_pi_free_text_question_characters_count"),this.charactersCountLabel.setAttribute("data-max-length",this.question.max_length),possibleAnswersContainer.appendChild(this.textInputContainer),this.textInputContainer.appendChild(this.textInput),this.textInputContainer.appendChild(this.charactersCountLabel),this.installEventOnFreeTextInput(this.textInput),submitButtonContainer=document.createElement("div"),submitButtonContainer.setAttribute("class","_pi_free_text_question_submit_button_container"),this.submitButton=document.createElement("input"),display_all_question||(this.submitButton.setAttribute("class","_pi_free_text_question_submit_button"),this.submitButton.setAttribute("type","submit"),this.submitButton.setAttribute("value",this.question.submit_label||"Submit"),this.submitButton.onclick=window.PulseInsightsObject.survey.freeTextSubmitClicked,submitButtonContainer.appendChild(this.submitButton)),possibleAnswersContainer.appendChild(submitButtonContainer),this.updateCharactersCountLabel(this.textInput)},installEventOnFreeTextInput:function(input){return input.addEventListener?(input.addEventListener("keypress",window.PulseInsightsObject.survey.textInputChanged),input.addEventListener("keyup",window.PulseInsightsObject.survey.textInputChanged)):input.attachEvent?(input.attachEvent("onkeypress",window.PulseInsightsObject.survey.textInputChanged),input.attachEvent("onkeyup",window.PulseInsightsObject.survey.textInputChanged)):(input.onkeypress=window.PulseInsightsObject.survey.textInputChanged,input.onkeyup=window.PulseInsightsObject.survey.textInputChanged)},freeTextSubmitClicked:function(){var params,questionId,submissionUdid,textAnswer;return textAnswer=window.PulseInsightsObject.survey.textInput.value,questionId=window.PulseInsightsObject.survey.question.id,params={identifier:window.PulseInsightsObject.identifier,question_id:questionId,text_answer:textAnswer},submissionUdid=null!=window.PulseInsightsObject.submission?window.PulseInsightsObject.submission.udid:null,null!=window.PulseInsightsObject.customData&&(params.custom_data=window.PulseInsightsObject.stringify(window.PulseInsightsObject.customData)),window.PulseInsightsObject.client_key&&(params.client_key=window.PulseInsightsObject.getClientKey()),window.PulseInsightsObject.previewMode||0===textAnswer.length?(window.PulseInsightsObject.survey.answersSubmitted(),!1):(window.PulseInsightsObject.triggerOnAnswerCallback(),window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/answer",params,window.PulseInsightsObject.survey.answersSubmitted),!1)},textInputChanged:function(event){var survey;return survey=window.PulseInsightsObject.survey,survey.updateCharactersCountLabel.apply(survey,[event.target])},updateCharactersCountLabel:function(input){var answerLength,answerText,charactersCountLabel,charactersCountLabelText,charactersCountLabelTextNode,maxLength,remainingCharacters;if(answerText=input.value,answerLength=answerText.length,charactersCountLabel=input.nextSibling,maxLength=charactersCountLabel.getAttribute("data-max-length"),0!==maxLength)return remainingCharacters=maxLength-answerLength,charactersCountLabelText=1===remainingCharacters?"1 character left":remainingCharacters+" characters left",charactersCountLabelTextNode=document.createTextNode(charactersCountLabelText),charactersCountLabel.innerHTML="",charactersCountLabel.appendChild(charactersCountLabelTextNode),event&&event.target&&event.target.parentNode.parentNode.setAttribute("data-answer",event.target.value),remainingCharacters>0&&remainingCharacters<20?(charactersCountLabel.setAttribute("class","_pi_free_text_question_characters_count danger"),this.submitButton.removeAttribute("disabled")):remainingCharacters<0?(charactersCountLabel.setAttribute("class","_pi_free_text_question_characters_count error"),this.submitButton.setAttribute("disabled","disabled"),event&&event.target?event.target.parentNode.parentNode.setAttribute("data-answer",""):void 0):(charactersCountLabel.setAttribute("class","_pi_free_text_question_characters_count"),this.submitButton.removeAttribute("disabled"))},freeTextQuestionCSS:function(){return"div._pi_free_text_question_field_container { margin: 0px 18px 10px 18px; } input._pi_free_text_question_field, textarea._pi_free_text_question_field { "+this.fontCSS()+"; width: 100%; padding: 0px 2px; border: none; border-bottom: 1px solid #57636e; background-color: transparent; outline: none; box-shadow: none; font-size: 15px; color: #ccd1dd; } textarea._pi_free_text_question_field { border: 1px solid #57636e; } input._pi_free_text_question_field:hover, textarea._pi_free_text_question_field:hover { border-bottom: 1px solid #8fa9b6; } textarea._pi_free_text_question_field:hover { border: 1px solid #8fa9b6; } div._pi_free_text_question_submit_button_container { margin: 10px 0px 0px 0px; } input._pi_free_text_question_submit_button { background-color: black; font-size: 15px; padding: 5px 20px; border: none; color: #eaf4fb; cursor: pointer; } input._pi_free_text_question_submit_button:hover { background-color: #101010; } input._pi_free_text_question_submit_button:disabled { opacity: 0.3; } input._pi_free_text_question_submit_button:hover:disabled { background-color: black; opacity: 0.3; } ._pi_free_text_question_characters_count { "+this.fontCSS()+"; text-align: right; font-size: 12px; color: #7a8992; } ._pi_free_text_question_characters_count.danger, ._pi_free_text_question_characters_count.error { color: #927a85; }"}})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.FullscreenSurvey=function(superClass){function FullscreenSurvey(){return FullscreenSurvey.__super__.constructor.apply(this,arguments)}return extend(FullscreenSurvey,superClass),FullscreenSurvey.prototype.widgetPositioning=function(){var double_margin;return this.attributes.fullscreen_margin?(double_margin=2*parseInt(this.attributes.fullscreen_margin),"top: 0px; left: 0px; margin: "+this.attributes.fullscreen_margin+"%; width: calc(100% - "+double_margin+"%) !important; position: fixed; display: flex !important; flex-direction: column !important; flex-wrap: nowrap !important; justify-content: space-between !important; align-items: center !important; align-content: center !important;"):"top: 0px; left: 0px; width: 100% !important; height: 100% !important; position: fixed; display: flex !important; flex-direction: column !important; flex-wrap: nowrap !important; justify-content: space-between !important; align-items: center !important; align-content: center !important;"},FullscreenSurvey.prototype.cssStyle=function(){return FullscreenSurvey.__super__.cssStyle.apply(this,arguments)+("._pi_invitationTextContainer { margin: 10px 20px; display: inline-block; } ._pi_startButton { display: inline-block; margin-top: 5px; } ._pi_loadingSurvey, ._pi_thankYouSurvey { "+this.fontCSS()+" color: "+this.textColor()+"; margin: 50px 0px 80px 0px; text-align: center; } ._pi_surveyWidget { text-align: center; height: auto; } ._pi_widgetContentContainer { margin-left: auto; margin-right: auto; width: 960px; text-align: center; } ._pi_closeButton { padding: 8px; } @media screen and (max-width: 960px) { ._pi_widgetContentContainer { width: 100%; } }")},FullscreenSurvey.prototype.mobileCssStyle=function(){return FullscreenSurvey.__super__.mobileCssStyle.apply(this,arguments)+"._pi_closeButton { padding: 0; } #_pi_surveyWidgetContainer.mobile-enabled #_pi_surveyWidget { top: 0px; left: 0px; width: 100% !important; height: 100% !important; position: fixed; display: flex !important; flex-direction: column !important; flex-wrap: nowrap !important; justify-content: space-between !important; align-items: center !important; align-content: center !important; border: none; margin: 0; }"},FullscreenSurvey}(window.Survey)}.call(this),function(){var allBehaviorsSatified,elementInViewport,getScrollPercent;window.PulseInsightsInclude(window.PulseInsights,{get:function(what){return"surveys"===what?this.getSurveys():this.log("Not sure what to get: '"+what+"'")},getSurveys:function(){return this.getParams().pi_present&&this.getParams().pi_poll?this.present_poll(this.getParams().pi_present,this.getParams().pi_poll):this.getParams().pi_present?this.present(this.getParams().pi_present):this.jsonpGet("/serve",this.collectEnvironmentAttributes(),this.surveysLoaded)},getParams:function(){var i,key,len,params,query,raw_vars,ref,v,val;for(query=window.location.search.substring(1),raw_vars=query.split("&"),params={},i=0,len=raw_vars.length;i<len;i++)v=raw_vars[i],ref=v.split("="),key=ref[0],val=ref[1],params[key]=decodeURIComponent(val);return params},surveysLoaded:function(data){if(data)return null!=data.device&&(this.udid=data.device.udid,this.updateUDID(this.udid)),null!=data.survey&&(this.submission=data.submission,this.renderSurvey(data.survey)),null!=data.device_data?this.device_data=data.device_data:void 0},renderSurvey:function(survey){var beginDate,behaviors_to_satisfy,error,interval;if(null!=this.survey&&(this.survey.destroy(),this.survey=null),0===survey.survey_type?this.survey=new DockedWidgetSurvey(survey):1===survey.survey_type?this.survey=new InlineSurvey(survey):2===survey.survey_type?this.survey=new TopBarSurvey(survey):3===survey.survey_type?this.survey=new BottomBarSurvey(survey):4===survey.survey_type?this.survey=new FullscreenSurvey(survey):this.log("Error: does not know how to render survey of type "+survey.survey_type+"."),null!=survey.custom_data_snippet&&survey.custom_data_snippet.length>0){this.log("Executing Custom Data Snippet.");try{eval(survey.custom_data_snippet)}catch(error1){error=error1,this.log("Error while executing custom data snippet: "+error)}}if(null!=this.survey)return beginDate=Date.now(),behaviors_to_satisfy={},"t"===this.survey.attributes.render_after_intent_exit_enabled&&(behaviors_to_satisfy.intent_exit="t",behaviors_to_satisfy.intent_exit_satisfied="f"),"t"===this.survey.attributes.render_after_x_seconds_enabled&&""!==this.survey.attributes.render_after_x_seconds&&(behaviors_to_satisfy.x_seconds=this.survey.attributes.render_after_x_seconds,behaviors_to_satisfy.x_seconds_satisfied="f"),"t"===this.survey.attributes.render_after_x_percent_scroll_enabled&&""!==this.survey.attributes.render_after_x_percent_scroll&&(behaviors_to_satisfy.x_percent_scroll=this.survey.attributes.render_after_x_percent_scroll,behaviors_to_satisfy.x_percent_scroll_satisfied="f"),"t"===this.survey.attributes.render_after_element_visible_enabled&&""!==this.survey.attributes.render_after_element_visible&&(behaviors_to_satisfy.e_visible=this.survey.attributes.render_after_element_visible,behaviors_to_satisfy.e_visible_satisfied="f"),"t"===this.survey.attributes.render_after_element_clicked_enabled&&""!==this.survey.attributes.render_after_element_clicked&&(behaviors_to_satisfy.e_clicked=this.survey.attributes.render_after_element_clicked,behaviors_to_satisfy.e_clicked_satisfied="f"),"t"===this.survey.attributes.text_on_page_enabled&&""!==this.survey.attributes.text_on_page_selector&&""!==this.survey.attributes.text_on_page_selector&&(behaviors_to_satisfy.text_on_page_selector=this.survey.attributes.text_on_page_selector,behaviors_to_satisfy.text_on_page_value=this.survey.attributes.text_on_page_value,behaviors_to_satisfy.text_on_page_presence=this.survey.attributes.text_on_page_presence,behaviors_to_satisfy.text_on_page_satisfied="f"),behaviors_to_satisfy.intent_exit&&ouibounce(!1,{aggressive:!0,timer:500,sensitivity:10,delay:500,callback:function(){behaviors_to_satisfy.intent_exit_satisfied="t",allBehaviorsSatified(behaviors_to_satisfy)?(clearInterval(interval),window.PulseInsightsObject.survey.render()):behaviors_to_satisfy.intent_exit_satisfied="f"}}),interval=setInterval(function(){var elToClick;if("t"===behaviors_to_satisfy.text_on_page_presence&&document.querySelector(behaviors_to_satisfy.text_on_page_selector)&&document.querySelector(behaviors_to_satisfy.text_on_page_selector).textContent.includes(behaviors_to_satisfy.text_on_page_value)&&(behaviors_to_satisfy.text_on_page_satisfied="t"),"f"===behaviors_to_satisfy.text_on_page_presence&&document.querySelector(behaviors_to_satisfy.text_on_page_selector)&&!document.querySelector(behaviors_to_satisfy.text_on_page_selector).textContent.includes(behaviors_to_satisfy.text_on_page_value)&&(behaviors_to_satisfy.text_on_page_satisfied="t"),behaviors_to_satisfy.x_seconds&&Date.now()/1e3-beginDate/1e3>=behaviors_to_satisfy.x_seconds&&(behaviors_to_satisfy.x_seconds_satisfied="t"),behaviors_to_satisfy.x_percent_scroll&&getScrollPercent()>=behaviors_to_satisfy.x_percent_scroll&&(behaviors_to_satisfy.x_percent_scroll_satisfied="t"),behaviors_to_satisfy.e_visible&&document.querySelector(behaviors_to_satisfy.e_visible)&&elementInViewport(document.querySelector(behaviors_to_satisfy.e_visible))&&(behaviors_to_satisfy.e_visible_satisfied="t"),behaviors_to_satisfy.e_clicked&&(elToClick=document.querySelector(behaviors_to_satisfy.e_clicked),"undefined"!=typeof elToClick&&null!==elToClick&&(elToClick.onclick=function(){return behaviors_to_satisfy.e_clicked_satisfied="t"})),allBehaviorsSatified(behaviors_to_satisfy))return clearInterval(interval),window.PulseInsightsObject.survey.render()},100)},collectEnvironmentAttributes:function(){var params;return params={udid:this.getUDID(),device_type:this.deviceType(),identifier:this.identifier||null,visit_count:this.readCookie("pi_visit_count"),pageview_count:this.readCookie("pi_pageview_count")},null!=this.getClientKey()&&(params.client_key=this.getClientKey()),null!=this.customData&&(params.custom_data=this.stringify(this.customData)),this.previewMode&&(params.preview_mode=!0),this.getParams().pi_poll&&(params.question_id=this.getParams().pi_poll),params},stringify:function(obj){var arr,fn,json,n,self,t,v;if(t=typeof obj,"object"!==t||null===obj)return"string"===t&&(obj='"'+obj+'"'),String(obj);json=[],arr=obj&&obj.constructor===Array,self=this,fn=function(n){return t=typeof v,"string"===t?v='"'+v+'"':"object"===t&&null!==v&&(v=self.stringify(v)),arr?json.push(String(v)):json.push('"'+n+'":'+String(v))};for(n in obj)v=obj[n],fn(n);return arr?"["+String(json)+"]":"{"+String(json)+"}"}},allBehaviorsSatified=function(behaviors_to_satisfy){return"f"!==behaviors_to_satisfy.x_percent_scroll_satisfied&&"f"!==behaviors_to_satisfy.x_seconds_satisfied&&"f"!==behaviors_to_satisfy.e_visible_satisfied&&"f"!==behaviors_to_satisfy.e_clicked_satisfied&&"f"!==behaviors_to_satisfy.intent_exit_satisfied&&"f"!==behaviors_to_satisfy.text_on_page_satisfied},elementInViewport=function(el){var height,left,top,width;for(top=el.offsetTop,left=el.offsetLeft,width=el.offsetWidth,height=el.offsetHeight;el.offsetParent;)el=el.offsetParent,top+=el.offsetTop,left+=el.offsetLeft;return top>=window.pageYOffset&&left>=window.pageXOffset&&top+height<=window.pageYOffset+window.innerHeight&&left+width<=window.pageXOffset+window.innerWidth},getScrollPercent=function(){var b,h,sh,st;return h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.InlineSurvey=function(superClass){function InlineSurvey(){return InlineSurvey.__super__.constructor.apply(this,arguments)}return extend(InlineSurvey,superClass),InlineSurvey.prototype.widgetParent=function(){var inlineTargetSelector,parent;if(inlineTargetSelector=PulseInsightsObject.isMobile()?this.attributes.mobile_inline_target_selector||this.attributes.inline_target_selector:this.attributes.inline_target_selector,parent=null,""!==inlineTargetSelector&&(parent=document.querySelector(inlineTargetSelector)),null!=parent)return this.log("Inline Target Area Found"),parent},InlineSurvey.prototype.cssStyle=function(){return InlineSurvey.__super__.cssStyle.apply(this,arguments)+("#_pi_surveyWidget { position: relative; } ._pi_invitationTextContainer { margin: 30px 0px; } ._pi_startButton { display: block; width: 50%; margin-top: 50px; margin-left: auto; margin-right: auto; text-decoration: none; } ._pi_loadingSurvey, ._pi_thankYouSurvey { "+this.fontCSS()+" color: "+this.textColor()+"; margin: 50px 0px 80px 0px; text-align: center; }")},InlineSurvey.prototype.height=function(){return"150px"},InlineSurvey.prototype.width=function(){return"100%"},InlineSurvey.prototype.widgetPositioning=function(){return"top: "+this.position().top+"; bottom: "+this.position().bottom+"; left: "+this.position().left+"; right: "+this.position().right+";"},InlineSurvey}(window.Survey)}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{testMode:function(){return"file:"===document.location.protocol},protocol:function(){return this.testMode()?"http:":document.location.protocol},rackAppDomain:function(){return null!=this.customRackAppDomain?this.customRackAppDomain:this.testMode()?"localhost:3000":"survey.pulseinsights.com"},host:function(domain){return this.log("Set custom Rack app host to '"+domain+"'"),this.customRackAppDomain=domain},jsonpGet:function(uri,data,callback){var fn,head,key,params,requestId,script,src,value;null==this.jsonpRequests&&(this.jsonpRequests=0),null==this.jsonpCallbacks&&(this.jsonpCallbacks={}),null==arguments[2]&&(callback=arguments[1],data={}),this.log("JSONP Get with URI "+uri),src=this.protocol()+"//"+this.rackAppDomain()+uri,src+=src.indexOf("?")+1?"&":"?",head=document.getElementsByTagName("head")[0],script=document.createElement("script"),requestId=this.jsonpRequests,this.jsonpRequests++,data.callback="window.PulseInsightsObject.jsonpCallbacks.request_"+requestId,this.jsonpCallbacks["request_"+requestId]=function(data){return head.removeChild(script),callback.apply(window.PulseInsightsObject,[data]),delete window.PulseInsightsObject.jsonpCallbacks["request_"+requestId]},params=[],fn=function(key){return params.push(key+"="+encodeURIComponent(value+""))};for(key in data)value=data[key],fn(key);return src+=params.join("&"),this.log("Complete URL with params"),this.log(src),script.type="text/javascript",script.src=src,head.appendChild(script)}})}.call(this),function(){window.PulseInsightsInclude(window.Survey,{renderMultipleChoicesQuestion:function(possibleAnswersContainer,display_all_questions){var fn,i,is_mobile,len,possibleAnswer,ref,self,submitButton,submitButtonContainer,textInputContainer;for(this.checkBoxes=[],self=this,is_mobile=window.PulseInsightsObject.isMobile()&&1!==this.attributes.survey_type&&3!==this.attributes.survey_type,ref=this.question.possible_answers,fn=function(possibleAnswer){var checkBox,checkBoxControl,per_row,possibleAnswerElement,possibleAnswerLabelElement;if(possibleAnswerElement=document.createElement("li"),checkBox=document.createElement("input"),checkBox.setAttribute("class","_pi_checkbox"),checkBox.setAttribute("type","checkbox"),checkBox.setAttribute("value",possibleAnswer.id),checkBoxControl=document.createElement("div"),checkBoxControl.setAttribute("class","_pi-control-indicator"),possibleAnswerLabelElement=document.createElement("label"),possibleAnswerLabelElement.setAttribute("class","_pi-control _pi-control-checkbox"),possibleAnswerLabelElement.innerHTML=window.PulseInsightsObject.survey.formatText(possibleAnswer.content),possibleAnswerLabelElement.insertBefore(checkBoxControl,possibleAnswerLabelElement.firstChild),possibleAnswerLabelElement.insertBefore(checkBox,possibleAnswerLabelElement.firstChild),checkBox.onclick=window.PulseInsightsObject.survey.multipleChoicesCheckboxClicked,possibleAnswerElement.appendChild(possibleAnswerLabelElement),possibleAnswersContainer.appendChild(possibleAnswerElement),per_row=is_mobile?self.question.answers_per_row_mobile:self.question.answers_per_row_desktop)return possibleAnswerElement.setAttribute("style","max-width: calc("+100/per_row+"% - 20px);")},i=0,len=ref.length;i<len;i++)possibleAnswer=ref[i],fn(possibleAnswer);return textInputContainer=document.createElement("div"),textInputContainer.setAttribute("class","_pi_free_text_question_field_container"),this.choicesCountLabel=document.createElement("div"),this.choicesCountLabel.setAttribute("class","_pi_multiple_choices_count"),possibleAnswersContainer.appendChild(textInputContainer),textInputContainer.appendChild(this.choicesCountLabel),submitButtonContainer=document.createElement("div"),display_all_questions||(submitButtonContainer.setAttribute("class","_pi_multiple_choices_question_submit_button_container"),submitButton=document.createElement("input"),submitButton.setAttribute("class","_pi_multiple_choices_question_submit_button"),submitButton.setAttribute("type","submit"),submitButton.setAttribute("value",this.question.submit_label||"Submit"),submitButton.onclick=window.PulseInsightsObject.survey.multipleChoicesSubmitClicked,submitButtonContainer.appendChild(submitButton)),possibleAnswersContainer.appendChild(submitButtonContainer)},multipleChoicesSubmitClicked:function(event){var checkBoxes,maximumSelection,params,questionId,submissionUdid;return event.stopPropagation(),questionId=window.PulseInsightsObject.survey.question.id,checkBoxes=window.PulseInsightsObject.survey.checkBoxes,null!=window.PulseInsightsObject.survey.question.maximum_selection&&(maximumSelection=window.PulseInsightsObject.survey.question.maximum_selection),params={identifier:window.PulseInsightsObject.identifier,question_id:questionId,check_boxes:checkBoxes},0!==checkBoxes.length&&(!(null!=maximumSelection&&checkBoxes.length>maximumSelection)&&(submissionUdid=null!=window.PulseInsightsObject.submission?window.PulseInsightsObject.submission.udid:null,null!=window.PulseInsightsObject.customData&&(params.custom_data=window.PulseInsightsObject.stringify(window.PulseInsightsObject.customData)),window.PulseInsightsObject.client_key&&(params.client_key=window.PulseInsightsObject.getClientKey()),window.PulseInsightsObject.previewMode?(window.PulseInsightsObject.survey.answersSubmitted(),!1):(window.PulseInsightsObject.triggerOnAnswerCallback(),window.PulseInsightsObject.jsonpGet("/submissions/"+submissionUdid+"/answer",params,window.PulseInsightsObject.survey.answersSubmitted),!1)))},multipleChoicesCheckboxClicked:function(event){var answerContainer,charactersCountLabelTextNode,checkBoxes,choicesCountLabel,choicesLabelText,i,index,len,maximumSelection,question,questionId,ref;if(event.stopPropagation(),checkBoxes=window.PulseInsightsObject.survey.checkBoxes,choicesCountLabel=window.PulseInsightsObject.survey.choicesCountLabel,answerContainer=this.parentNode.parentNode.parentNode,"t"===window.PulseInsightsObject.survey.attributes.display_all_questions)for(questionId=parseInt(answerContainer.getAttribute("data-question-id")),ref=window.PulseInsightsObject.survey.questions,i=0,len=ref.length;i<len;i++)question=ref[i],question.id===questionId&&null!=question.maximum_selection&&(maximumSelection=question.maximum_selection);else null!=window.PulseInsightsObject.survey.question.maximum_selection&&(maximumSelection=window.PulseInsightsObject.survey.question.maximum_selection);return this.checked?(window.PulseInsightsObject.survey.checkBoxes.push(this.value),null!=maximumSelection&&checkBoxes.length>maximumSelection&&(choicesLabelText="Maximum of "+maximumSelection+" please.",charactersCountLabelTextNode=document.createTextNode(choicesLabelText),choicesCountLabel.innerHTML="",choicesCountLabel.appendChild(charactersCountLabelTextNode))):(index=window.PulseInsightsObject.survey.checkBoxes.indexOf(this.value),window.PulseInsightsObject.survey.checkBoxes.splice(index,1),null!=maximumSelection&&checkBoxes.length<=maximumSelection&&(choicesLabelText="",charactersCountLabelTextNode=document.createTextNode(choicesLabelText),choicesCountLabel.innerHTML="",choicesCountLabel.appendChild(charactersCountLabelTextNode))),null!=maximumSelection&&checkBoxes.length>maximumSelection?answerContainer.setAttribute("data-answer",""):answerContainer.setAttribute("data-answer",window.PulseInsightsObject.survey.checkBoxes)},multipleChoicesQuestionCSS:function(){return"._pi-control { display: block; position: relative; margin: 0px 0px 0px 25px; padding: 5px 0px 5px 0px; } ._pi-control input { position: absolute; z-index: -1; opacity: 0; } ._pi-control-indicator { position: absolute; top: 9px; left: -25px; height: 15px; width: 15px; border: 1px solid rgba(255,255,255,0.5); } ._pi-control-indicator:after { content: ''; position: absolute; display: none; } ._pi-control input:checked ~ ._pi-control-indicator:after { display: block; } ._pi-control-checkbox ._pi-control-indicator:after { left: 4px; width: 5px; height: 11px; border: solid rgba(255,255,255,0.5); border-width: 0 2px 2px 0; transform: rotate(45deg); } div._pi_free_text_question_field_container { clear: both; margin: 0px 18px 10px 18px; } ul._pi_answers_container li label input._pi_checkbox { margin-right: 10px; cursor: pointer; } ul._pi_answers_container li label { color: "+this.answerTextColor()+"; "+this.fontCSS()+" width: 100%; width: -moz-calc(100% - 35px); width: -webkit-calc(100% - 35px); width: calc(100% - 35px); float: left; cursor: pointer; } div._pi_multiple_choices_question_submit_button_container { margin: 10px 0px 0px 0px; clear: both; } input._pi_multiple_choices_question_submit_button { background-color: black; font-size: 15px; padding: 5px 20px; border: none; color: #eaf4fb; cursor: pointer; } input._pi_multiple_choices_question_submit_button:hover { background-color: #101010; } input._pi_multiple_choices_question_submit_button:disabled { opacity: 0.3; } input._pi_multiple_choices_question_submit_button:hover:disabled { background-color: black; opacity: 0.3; } ._pi_multiple_choices_count { "+this.fontCSS()+"; font-size: 12px; color: #927a85; height: 17px; }"}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{present:function(surveyId){return this.jsonpGet("/surveys/"+surveyId,this.collectEnvironmentAttributes(),this.surveyLoaded)},surveyLoaded:function(data){return this.log("Survey loaded"),null!=data.device&&(this.udid=data.device.udid,this.updateUDID(this.udid)),null!=data.device_data&&(this.device_data=data.device_data),null!=data.survey?(this.submission=data.submission,this.log("Rendering survey "+data.survey.id),this.renderSurvey(data.survey)):this.log("No survey to render")}})}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{present_poll:function(surveyId){return this.jsonpGet("/surveys/"+surveyId+"/poll",this.collectEnvironmentAttributes(),this.pollLoaded)},pollLoaded:function(data){return this.log("Survey loaded"),null!=data.survey&&null!=data.results&&data.results.length>0?(this.poll=data.results,this.question=data.question,this.log("Rendering survey "+data.survey.id+" and poll"),this.renderSurvey(data.survey)):this.log("No survey to render")}})}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};window.PulseInsightsInclude(window.Survey,{render:function(){var backgroundContainer,branding,container,hasTouch,height,i,invitation,renderBelow,startButton,startText,t,that,widgetContainerClass,widgetParent,widgetType,widgetTypeSearch;return this.renderCSS(),window.PulseInsightsObject.isMobile()&&1!==this.attributes.survey_type&&3!==this.attributes.survey_type&&this.insertCSS(this.mobileCssStyle()),this.renderThemeCss(),this.renderCustomCSS(),this.widgetContainer=document.createElement("div"),this.widgetContainer.setAttribute("id","_pi_surveyWidgetContainer"),this.widgetContainer.onclick=window.PulseInsightsObject.survey.widgetContainerClickedEvent,this.widget=document.createElement("div"),this.widget.setAttribute("id","_pi_surveyWidget"),widgetTypeSearch=/function\s([^(]{1,})\(/.exec(this.constructor.toString()),widgetType=widgetTypeSearch&&widgetTypeSearch.length>1?widgetTypeSearch[1].trim():"","t"===this.attributes.display_all_questions&&this.widget.setAttribute("data-survey-display","all-at-once"),this.widget.setAttribute("survey-widget-type",widgetType.toLowerCase()),window.PulseInsightsObject.isMobile()&&this.widgetContainer.setAttribute("class","mobile-enabled"),widgetContainerClass="",window.PulseInsightsObject.isMobile()&&(widgetContainerClass="mobile-enabled"),hasTouch=indexOf.call(window,"ontouchstart")>=0,hasTouch&&(widgetContainerClass+=" has-touch"),"t"===this.attributes.display_all_questions&&(widgetContainerClass+=" all-at-once"),this.widgetContainer.setAttribute("class",widgetContainerClass),this.closeButton=document.createElement("div"),this.closeButton.setAttribute("class","_pi_closeButton"),this.closeButton.appendChild(document.createTextNode("\xd7")),this.closeButton.onclick=window.PulseInsightsObject.survey.closeButtonClickedEvent,this.widget.appendChild(this.closeButton),this.widgetContent=document.createElement("div"),this.widgetContent.setAttribute("class","_pi_widgetContentContainer"),null!=this.attributes.background&&""!==this.attributes.background&&(backgroundContainer=document.createElement("img"),backgroundContainer.setAttribute("src",this.attributes.background),backgroundContainer.setAttribute("class","_pi_background_image"),this.widget.appendChild(backgroundContainer)),null!=this.invitationText()&&(invitation=document.createElement("div"),invitation.setAttribute("class","_pi_invitationTextContainer"),invitation.innerHTML=this.formatText(this.invitationText()),invitation.onclick=window.PulseInsightsObject.survey.startButtonClickedEvent,this.widgetContent.appendChild(invitation),startButton=document.createElement("a"),startButton.setAttribute("class","_pi_startButton"),startButton.setAttribute("href","#"),"t"!==this.invitationButtonDisabled()&&(startText=this.invitationButtonText()||"Start",startButton.innerHTML=startText,startButton.onclick=window.PulseInsightsObject.survey.startButtonClickedEvent,this.widgetContent.appendChild(startButton))),this.widget.appendChild(this.widgetContent),this.attributes.pulse_insights_branding&&(branding=document.createElement("a"),
branding.setAttribute("class","_pi_branding"),branding.setAttribute("href","http://pulseinsights.com?utm_source=survey_widget&utm_medium=client_site_referral&utm_campaign="+window.PulseInsightsObject.identifier),branding.setAttribute("target","_blank"),branding.appendChild(document.createTextNode("Crafted with Pulse Insights")),this.widget.appendChild(branding)),this.widgetContainer.appendChild(this.widget),renderBelow="0"===this.attributes.inline_target_position,widgetParent=this.widgetParent(),"undefined"==typeof widgetParent?(that=this,i=0,t=setInterval(function(){if(widgetParent=that.widgetParent(),i++,100===i&&clearInterval(t),"undefined"!=typeof widgetParent)return clearInterval(t),renderBelow?widgetParent.appendChild(that.widgetContainer):widgetParent.insertBefore(that.widgetContainer,widgetParent.childNodes[0])},100)):renderBelow?this.widgetParent().appendChild(this.widgetContainer):this.widgetParent().insertBefore(this.widgetContainer,this.widgetParent().childNodes[0]),this.invitationText()||(null!=PulseInsightsObject.poll?this.renderResults(PulseInsightsObject.poll):this.loadQuestions()),container=this.widget,height=this.height(),setTimeout(function(){return container.setAttribute("style","max-height: 1999px")},10)},renderAllQuestions:function(){var display_all_questions,j,len,question,ref,submitButton,submitButtonContainer,submitButtonError;for(this.widgetContent.innerHTML="",display_all_questions=!0,ref=this.questions,j=0,len=ref.length;j<len;j++)question=ref[j],this.question=question,this.renderCurrentQuestion(display_all_questions);return submitButtonContainer=document.createElement("div"),submitButtonContainer.setAttribute("class","_pi_all_questions_submit_button_container"),submitButtonError=document.createElement("div"),submitButtonError.setAttribute("class","_pi_all_questions_error"),submitButton=document.createElement("input"),submitButton.setAttribute("class","_pi_all_questions_submit_button"),submitButton.setAttribute("type","submit"),submitButton.setAttribute("value","Submit"),submitButton.onclick=window.PulseInsightsObject.survey.allQuestionsSubmitClicked,submitButtonContainer.appendChild(submitButton),submitButtonContainer.appendChild(submitButtonError),this.widgetContent.appendChild(submitButtonContainer)},renderCurrentQuestion:function(display_all_questions){var answer_widths,answers_per_row,body,customContentCardNextQuestion,customContentCardNextQuestions,emptyOption,fn,fn1,is_mobile,j,k,l,len,len1,len2,match,possibleAnswer,possibleAnswerSelectList,possibleAnswersContainer,questionElement,radio_button,redirect_url,ref,ref1,regex,script,self;if(null==display_all_questions&&(display_all_questions=!1),display_all_questions||(this.widgetContent.innerHTML=""),questionElement=document.createElement("div"),questionElement.setAttribute("class","_pi_question _pi_question_"+this.question.question_type),"custom_content_question"===this.question.question_type){for(body=document.getElementsByTagName("body")[0],regex=/<script\b[^>]*>([\s\S]*?)<\/script>/gm,match=void 0;match=regex.exec(this.question.content);)script=document.createElement("script"),script.type="text/javascript",script.text=match[1],body.appendChild(script);questionElement.innerHTML=this.question.content}else this.widget.setAttribute("id","_pi_surveyWidget"),this.closeButton.setAttribute("class","_pi_closeButton"),questionElement.innerHTML=this.formatText(this.question.content);if(this.widgetContent.appendChild(questionElement),possibleAnswersContainer=possibleAnswersContainer=2===this.question.button_type?document.createElement("div"):document.createElement("ul"),possibleAnswersContainer.setAttribute("class","_pi_answers_container"),"f"===this.attributes.display_all_questions?(this.widget.setAttribute("data-question-id",this.question.id),possibleAnswersContainer.setAttribute("data-question-id",this.question.id),this.widget.setAttribute("data-question-type",this.question.question_type),possibleAnswersContainer.setAttribute("data-question-type",this.question.question_type)):(possibleAnswersContainer.setAttribute("data-question-id",this.question.id),possibleAnswersContainer.setAttribute("data-question-type",this.question.question_type),possibleAnswersContainer.setAttribute("data-question-optional",this.question.optional)),answers_per_row=window.PulseInsightsObject.isMobile()?this.question.answers_per_row_mobile:this.question.answers_per_row_desktop,radio_button=1===this.question.button_type?"off":"on",answer_widths=1===this.question.width_type?0===this.question.answers_alignment?"variable-left":"variable-center":"fixed",answer_widths&&"f"===this.attributes.display_all_questions?(this.widget.setAttribute("data-answer-widths",answer_widths),possibleAnswersContainer.setAttribute("data-answer-widths",answer_widths)):answer_widths&&"t"===this.attributes.display_all_questions?possibleAnswersContainer.setAttribute("data-answer-widths",answer_widths):this.widget.removeAttribute("data-answer-widths"),answers_per_row&&"f"===this.attributes.display_all_questions?(this.widget.setAttribute("data-answers-per-row",answers_per_row),possibleAnswersContainer.setAttribute("data-answers-per-row",answers_per_row)):answers_per_row&&"t"===this.attributes.display_all_questions?possibleAnswersContainer.setAttribute("data-answers-per-row",answers_per_row):this.widget.removeAttribute("data-answers-per-row"),radio_button&&"f"===this.attributes.display_all_questions?(this.widget.setAttribute("data-radio-button",radio_button),possibleAnswersContainer.setAttribute("data-radio-button",radio_button)):radio_button&&"t"===this.attributes.display_all_questions?possibleAnswersContainer.setAttribute("data-radio-button",radio_button):this.widget.removeAttribute("data-radio-button"),this.question.possible_answers&&"f"===this.attributes.display_all_questions?(this.widget.setAttribute("data-possible-answers",this.question.possible_answers.length),possibleAnswersContainer.setAttribute("data-possible-answers",this.question.possible_answers.length)):this.question.possible_answers&&"t"===this.attributes.display_all_questions?possibleAnswersContainer.setAttribute("data-possible-answers",this.question.possible_answers.length):this.widget.removeAttribute("data-possible-answers"),self=this,is_mobile=window.PulseInsightsObject.isMobile()&&1!==this.attributes.survey_type&&3!==this.attributes.survey_type,"single_choice_question"===this.question.question_type)if(2===this.question.button_type){for(possibleAnswerSelectList=document.createElement("select"),possibleAnswerSelectList.setAttribute("class","_pi_select"),emptyOption=document.createElement("option"),emptyOption.setAttribute("disabled",""),emptyOption.setAttribute("selected",""),emptyOption.setAttribute("value",""),emptyOption.innerHTML="Select an option",possibleAnswerSelectList.appendChild(emptyOption),ref=this.question.possible_answers,fn=function(possibleAnswer){var possibleAnswerOption;return possibleAnswerOption=document.createElement("option"),possibleAnswerOption.setAttribute("value",possibleAnswer.id),possibleAnswerOption.setAttribute("data-answer-id",possibleAnswer.id),possibleAnswerOption.innerHTML=self.formatText(possibleAnswer.content),possibleAnswerSelectList.appendChild(possibleAnswerOption)},j=0,len=ref.length;j<len;j++)possibleAnswer=ref[j],fn(possibleAnswer);possibleAnswersContainer.appendChild(possibleAnswerSelectList),display_all_questions?(possibleAnswerSelectList.addEventListener("keydown",function(event){if("Enter"===event.key)return event.preventDefault(),this.parentNode.setAttribute("data-answer",this.value)}),possibleAnswerSelectList.onchange=function(){return this.parentNode.setAttribute("data-answer",this.value)}):(possibleAnswerSelectList.addEventListener("keydown",function(event){if("Enter"===event.key)return event.preventDefault(),window.PulseInsightsObject.survey.answerClicked(event)}),possibleAnswerSelectList.onchange=function(event){return window.PulseInsightsObject.survey.answerClicked(event)})}else for(ref1=this.question.possible_answers,fn1=function(possibleAnswer){var image_height,image_width,per_row,possibleAnswerElement,possibleAnswerElementLink,possibleAnswerImage,possibleAnswerLabelElement,radioButtonInnerElement,radioButtonOuterElement;return possibleAnswerElement=document.createElement("li"),possibleAnswerElementLink=document.createElement("a"),possibleAnswerElementLink.setAttribute("href","#"),possibleAnswerElementLink.setAttribute("data-answer-id",possibleAnswer.id),possibleAnswerElementLink.setAttribute("tabindex","-1"),radioButtonOuterElement=document.createElement("span"),radioButtonOuterElement.setAttribute("class","_pi_radio_button_outer"),radioButtonInnerElement=document.createElement("span"),radioButtonInnerElement.setAttribute("class","_pi_radio_button_inner"),radioButtonOuterElement.appendChild(radioButtonInnerElement),possibleAnswerElementLink.appendChild(radioButtonOuterElement),possibleAnswer.image_url&&(possibleAnswerElementLink.setAttribute("class","with-image"),possibleAnswerElement.setAttribute("class","with-image"),possibleAnswerImage=document.createElement("img"),possibleAnswerImage.setAttribute("src",possibleAnswer.image_url),"mobile"===window.PulseInsightsObject.deviceType()?(image_height=possibleAnswer.image_height_mobile,image_width=possibleAnswer.image_width_mobile):"tablet"===window.PulseInsightsObject.deviceType()?(image_height=possibleAnswer.image_height_tablet,image_width=possibleAnswer.image_width_tablet):(image_height=possibleAnswer.image_height,image_width=possibleAnswer.image_width),possibleAnswerImage.setAttribute("height",image_height),possibleAnswerImage.setAttribute("width",image_width),possibleAnswerImage.setAttribute("alt",possibleAnswer.image_alt),possibleAnswerElementLink.appendChild(possibleAnswerImage)),"0"!==self.question.image_type&&(possibleAnswerLabelElement=document.createElement("label"),possibleAnswerLabelElement.setAttribute("tabindex","0"),possibleAnswerLabelElement.setAttribute("role","button"),possibleAnswer.image_url&&possibleAnswerLabelElement.setAttribute("class","with-image"),possibleAnswerLabelElement.innerHTML=self.formatText(possibleAnswer.content),possibleAnswerElementLink.appendChild(possibleAnswerLabelElement),"0"===possibleAnswer.image_position?possibleAnswerElementLink.setAttribute("class","with-img with-img-top"):"1"===possibleAnswer.image_position?possibleAnswerElementLink.setAttribute("class","with-img with-img-bottom"):"2"===possibleAnswer.image_position?possibleAnswerElementLink.setAttribute("class","with-img with-img-right"):"3"===possibleAnswer.image_position&&possibleAnswerElementLink.setAttribute("class","with-img with-img-left")),per_row=is_mobile?self.question.answers_per_row_mobile:self.question.answers_per_row_desktop,0===self.question.button_type&&per_row&&(possibleAnswerElement.setAttribute("style","max-width: calc("+100/per_row+"% - 20px);"),possibleAnswer.image_url&&(possibleAnswerImage.setAttribute("style","margin: 5px 25px;"),radioButtonOuterElement.setAttribute("style","top: calc(50% - 7px);"))),1===self.question.button_type&&(0===self.question.width_type&&per_row&&(possibleAnswerElement.setAttribute("style","max-width: calc("+100/per_row+"% - 20px);"),radioButtonOuterElement.setAttribute("style","display: none;"),"0"!==self.question.image_type&&possibleAnswerLabelElement.setAttribute("style","text-align: center;")),1===self.question.width_type&&(0===self.question.answers_alignment&&(possibleAnswerElement.setAttribute("style","width: auto; max-width: none; float: left; display: block;"),radioButtonOuterElement.setAttribute("style","display: none;"),possibleAnswer.image_url&&possibleAnswerElementLink.setAttribute("style","text-align: center;"),"0"!==self.question.image_type&&possibleAnswerLabelElement.setAttribute("style","text-align: center; width: 100%; margin: 0;")),1===self.question.answers_alignment&&(possibleAnswerElement.setAttribute("style","width: auto; max-width: none; float: none; display: inline-block;"),radioButtonOuterElement.setAttribute("style","display: none;"),possibleAnswer.image_url&&possibleAnswerElementLink.setAttribute("style","text-align: center;"),"0"!==self.question.image_type&&possibleAnswerLabelElement.setAttribute("style","text-align: center; width: 100%; margin: 0;")))),display_all_questions?(possibleAnswerElementLink.addEventListener("keydown",function(event){var l,len2,other_li,ref2;if("Enter"===event.key){for(event.preventDefault(),ref2=this.parentElement.parentElement.childNodes,l=0,len2=ref2.length;l<len2;l++)other_li=ref2[l],other_li.setAttribute("class","");return this.parentElement.setAttribute("class","selected"),this.parentNode.parentNode.setAttribute("data-answer",this.getAttribute("data-answer-id"))}}),possibleAnswerElementLink.onclick=function(event){var l,len2,other_li,ref2;for(event.preventDefault(),ref2=this.parentElement.parentElement.childNodes,l=0,len2=ref2.length;l<len2;l++)other_li=ref2[l],other_li.setAttribute("class","");return this.parentElement.setAttribute("class","selected"),this.parentNode.parentNode.setAttribute("data-answer",this.getAttribute("data-answer-id"))}):(possibleAnswerElementLink.addEventListener("keydown",function(event){if("Enter"===event.key)return event.preventDefault(),window.PulseInsightsObject.survey.answerClicked(event)}),possibleAnswerElementLink.onclick=window.PulseInsightsObject.survey.answerClicked),possibleAnswerElement.appendChild(possibleAnswerElementLink),possibleAnswersContainer.appendChild(possibleAnswerElement)},k=0,len1=ref1.length;k<len1;k++)possibleAnswer=ref1[k],fn1(possibleAnswer);if("multiple_choices_question"===this.question.question_type&&this.renderMultipleChoicesQuestion(possibleAnswersContainer,display_all_questions),"free_text_question"===this.question.question_type&&this.renderFreeTextQuestion(possibleAnswersContainer,display_all_questions),"custom_content_question"===this.question.question_type){for(customContentCardNextQuestions=document.getElementsByClassName("pi_question_link"),l=0,len2=customContentCardNextQuestions.length;l<len2;l++)customContentCardNextQuestion=customContentCardNextQuestions[l],customContentCardNextQuestion.onclick=window.PulseInsightsObject.survey.customCardClicked;"t"===this.question.fullscreen&&(this.widget.setAttribute("id","_pi_surveyWidgetCustom"),this.closeButton.setAttribute("class","_pi_closeCustomButton"),questionElement.setAttribute("class","_pi_question _pi_question_"+this.question.question_type+" _pi_question_"+this.question.question_type+"_fullscreen"),null!=this.question.opacity?document.getElementById("_pi_surveyWidgetCustom").style.opacity="."+this.question.opacity:document.getElementById("_pi_surveyWidgetCustom").style.opacity=".9",null!=this.question.background_color?document.getElementById("_pi_surveyWidgetCustom").style.background=this.question.background_color:document.getElementById("_pi_surveyWidgetCustom").style.background="white"),"t"===this.question.autoclose_enabled&&null!=this.question.autoclose_delay?setTimeout(function(){return window.PulseInsightsObject.survey.closeButtonClickedEvent()},1e3*this.question.autoclose_delay):(this.question.autoredirect_enabled=null!=this.question.autoredirect_url&&null!=this.question.autoredirect_delay)&&(redirect_url=this.question.autoredirect_url,setTimeout(function(){return window.location=redirect_url},1e3*this.question.autoredirect_delay))}return this.widgetContent.appendChild(possibleAnswersContainer)},renderResults:function(results){var index,j,k,len,len1,pollChart,pollChoice,pollContainer,pollFiller,pollName,pollProgress,pollProgressCount,pollProgressPercentage,pollText,question,questionElement,result,resultCount,resultPercentage,self,totalCount;for(this.widgetContent.innerHTML="",questionElement=document.createElement("div"),questionElement.setAttribute("class","_pi_question"),question=this.question||PulseInsightsObject.question,questionElement.innerHTML=question.content,this.widgetContent.appendChild(questionElement),self=this,totalCount=0,j=0,len=results.length;j<len;j++)result=results[j],totalCount+=parseInt(result.count);for("single_choice_question"===question.question_type&&(totalCount+=1),"multiple_choices_question"===question.question_type&&(totalCount+=this.checkBoxes.length),pollContainer=document.createElement("div"),pollContainer.setAttribute("class","_pi_pollContainer"),index=k=0,len1=results.length;k<len1;index=++k)result=results[index],resultCount=parseInt(result.count),"single_choice_question"===question.question_type&&this.answerId===result.id&&(resultCount+=1),"multiple_choices_question"===question.question_type&&this.checkBoxes.indexOf(result.id)>=0&&(resultCount+=1),resultPercentage=totalCount>0?Math.round(100*resultCount/totalCount):0,pollChoice=document.createElement("label"),pollChoice.setAttribute("class","_pi_pollChoice"),pollChart=document.createElement("span"),pollChart.setAttribute("class","_pi_pollChart"),pollChart.setAttribute("data-percent",resultPercentage),pollChoice.appendChild(pollChart),pollText=document.createElement("span"),pollText.setAttribute("class","_pi_pollText"),pollFiller=document.createElement("span"),pollFiller.style.opacity="0",pollFiller.innerHTML=resultPercentage+"%",pollText.appendChild(pollFiller),pollProgress=document.createElement("div"),pollProgress.setAttribute("class","_pi_pollProgress"),pollProgressPercentage=document.createElement("div"),pollProgressPercentage.setAttribute("class","_pi_pollProgressPercentage"),pollProgressPercentage.innerHTML=resultPercentage+"%",pollProgressCount=document.createElement("div"),pollProgressCount.setAttribute("class","_pi_pollProgressCount"),pollProgressCount.innerHTML="("+resultCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" responses)",pollProgress.appendChild(pollProgressPercentage),pollProgress.appendChild(pollProgressCount),pollName=document.createElement("div"),pollName.setAttribute("class","_pi_pollName"),pollName.innerHTML=self.formatText(result.content),pollChoice.appendChild(pollText),pollContainer.appendChild(pollName),pollContainer.appendChild(pollChoice),pollContainer.appendChild(pollProgress),pollContainer.style.transition="all .3s cubic-bezier(0.5,1.2,.5,1.2)",this.widgetContent.appendChild(pollContainer);return setTimeout(function(){var l,len2,percent,ref,results1;for(ref=document.getElementsByClassName("_pi_pollChart"),results1=[],l=0,len2=ref.length;l<len2;l++)pollChart=ref[l],percent=pollChart.getAttribute("data-percent"),results1.push(pollChart.style.width=percent+"%");return results1},100)},renderThankYou:function(){var thankYouSurvey;return thankYouSurvey=document.createElement("div"),thankYouSurvey.setAttribute("class","_pi_thankYouSurvey"),thankYouSurvey.innerHTML=this.formatText(this.thankYouText()),this.widgetContent.innerHTML="",this.widgetContent.appendChild(thankYouSurvey),setTimeout(function(){return window.PulseInsightsObject.survey.closeButtonClickedEvent()},2e3),!0},renderCSS:function(){return this.insertCSS(this.cssStyle())},renderThemeCss:function(){return null!=this.attributes.theme_css&&this.insertCSS(this.attributes.theme_css)},renderAccountCustomCSS:function(){return null!=this.attributes.account_custom_css&&this.insertCSS(this.attributes.account_custom_css)},renderCustomCSS:function(){return null!=this.attributes.custom_css&&this.insertCSS(this.attributes.custom_css)},insertCSS:function(cssText){var body,css;return css=document.createElement("style"),css.type="text/css",css.className="survey-"+this.id(),css.styleSheet?css.styleSheet.cssText=cssText:css.appendChild(document.createTextNode(cssText)),body=document.getElementsByTagName("body")[0],body.appendChild(css)}})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;window.TopBarSurvey=function(superClass){function TopBarSurvey(){return TopBarSurvey.__super__.constructor.apply(this,arguments)}return extend(TopBarSurvey,superClass),TopBarSurvey.prototype.widgetPositioning=function(){return"top: 0px; left: 0px; right: 0px;"},TopBarSurvey.prototype.cssStyle=function(){return TopBarSurvey.__super__.cssStyle.apply(this,arguments)+"#_pi_pusher { display: block; } ._pi_closeButton { top: 14px; width: 40px; height: 40px; }"},TopBarSurvey.prototype.render=function(){var parent,redimensionPusher;return TopBarSurvey.__super__.render.apply(this,arguments),"false"===this.attributes.pusher_enabled?void this.log("Pusher Disabled"):(this.log("Pusher Enabled"),this.pusher=document.createElement("div"),this.pusher.setAttribute("id","_pi_pusher"),parent=document.getElementsByTagName("body")[0],parent.insertBefore(this.pusher,parent.firstChild),redimensionPusher=function(){var pusher,widget,widgetHeight;return pusher=document.getElementById("_pi_pusher"),widget=document.getElementById("_pi_surveyWidget"),widgetHeight=widget.offsetHeight,pusher.setAttribute("style","height: "+widgetHeight+"px;")},this.redimensionPusherInterval=setInterval(redimensionPusher,100))},TopBarSurvey.prototype.closeButtonClicked=function(){if(TopBarSurvey.__super__.closeButtonClicked.apply(this,arguments),null!=this.redimensionPusherInterval)return setTimeout(function(){return clearInterval(this.redimensionPusherInterval),this.redimensionPusherInterval=null},1e3)},TopBarSurvey}(window.BarSurvey)}.call(this),function(){window.PulseInsightsInclude(window.PulseInsights,{UDIDCookieName:function(){return"pulse_insights_udid"},UDIDCookieExpiration:function(){return 60},getUDID:function(){var existingUDID,newUDID;return existingUDID=this.readCookie(this.UDIDCookieName()),null!=existingUDID?(this.log("Found existing UDID: "+existingUDID),existingUDID):(this.log("Could not find existing UDID, creating a new one"),newUDID=this.createUDID(),this.createCookie(this.UDIDCookieName(),newUDID,this.UDIDCookieExpiration()),newUDID)},updateUDID:function(newUDID){return this.createCookie(this.UDIDCookieName(),newUDID,this.UDIDCookieExpiration())},createUDID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;return r=16*Math.random()|0,v="x"===c?r:3&r|8,v.toString(16)})}})}.call(this),"object"==typeof window.PulseInsightsObject||(window.PulseInsightsObject=new window.PulseInsights);